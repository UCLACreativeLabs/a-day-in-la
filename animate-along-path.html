<html>

<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js"></script>
	<style type="text/css">
	svg {
		width: 300px;
		height: 300px;
	}
	</style>
</head>

<body>
	<svg id="svg"></svg>
	<script>

	// returns a matrix that transform points from src's coordinate system
	// to dest's coordinate system
	function transformBetween(src, dest) {
		var srcTransform = src.transform().globalMatrix.invert();
		var destTransform = dest.transform().globalMatrix.invert();
		return srcTransform.invert().multLeft(destTransform);
	}

	// modified from http://michaeltempest.com/the-missing-snap-svg-function/
	function animateAlongPath(path, el, start, duration, easing, callback) {
		var len = Snap.path.getTotalLength(path),
			elBB = el.getBBox(),
			mat = transformBetween(path, el);

		Snap.animate(start, len, function(value) {
			var pt = Snap.path.getPointAtLength(path, value);
			el.transform('t' + (mat.x(pt.x,pt.y) - elBB.cx) + ',' + (mat.y(pt.x,pt.y) - elBB.cy));
		}, duration, easing, function() {
			if (callback) callback(path);
		});
	};

	var s = Snap('#svg');
	var circle = s.circle(-10, -10, 10);
	Snap.load('testpath.svg', (imported) => {
		s.append(imported);
		var p = Snap('#path4146');
		animateAlongPath(p, circle, 0, 5000);
	});
	</script>
</body>

</html>
